(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{601:(e,s,t)=>{Promise.resolve().then(t.bind(t,9485))},908:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},1362:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},2056:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},3464:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("list-filter",[["path",{d:"M2 5h20",key:"1fs1ex"}],["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M9 19h6",key:"456am0"}]])},5998:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])},6983:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},7772:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},9485:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var a=t(5155),l=t(2115),r=t(3464),i=t(5870),c=t(9865),n=t(908),d=t(5998),o=t(2056),x=t(6983),m=t(1362),h=t(189),u=t(5643),p=t(5196),j=t(2619),g=t.n(j),y=t(7003),f=t(3209),N=t(7812);function w(){let[e,s]=(0,l.useState)(!1),[t,j]=(0,l.useState)("all"),[w,v]=(0,l.useState)("none"),[b,k]=(0,l.useState)("idle"),[A,S]=(0,l.useState)([]),[C,E]=(0,l.useState)(!0),[M,Z]=(0,l.useState)(null),{user:B}=(0,p.A)();(0,l.useEffect)(()=>{(async()=>{try{E(!0);let e=await fetch("/api/licenses");if(!e.ok)throw Error("Failed to fetch licenses");let s=await e.json();S(s),Z(null)}catch(e){console.error("Error fetching licenses:",e),Z("Failed to load license data. Please try again later.")}finally{E(!1)}})()},[]);let R=(0,l.useMemo)(()=>({total:A.length,expired:A.filter(e=>"Expired"===e.computedStatus).length,warning:A.filter(e=>"Expiring Soon"===e.computedStatus).length,active:A.filter(e=>"Active"===e.computedStatus).length}),[A]),T=(0,l.useMemo)(()=>A.filter(e=>"expired"===t?"Expired"===e.computedStatus:"warning"===t?"Expiring Soon"===e.computedStatus:"active"!==t||"Active"===e.computedStatus),[A,t]);return(0,a.jsxs)("div",{className:"min-h-screen pb-12 bg-background",children:[(0,a.jsx)("nav",{className:"bg-card shadow-sm border-b sticky top-0 z-30",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-primary p-2 rounded-lg text-primary-foreground",children:(0,a.jsx)(r.A,{size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-foreground",children:"LicenseGuard"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"ระบบติดตามใบอนุญาต"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(u.U,{}),B?(0,a.jsx)(y.$,{asChild:!0,children:(0,a.jsxs)(g(),{href:"/admin",children:[(0,a.jsx)(i.A,{className:"mr-2 h-4 w-4"}),"Admin"]})}):(0,a.jsx)(y.$,{asChild:!0,variant:"outline",children:(0,a.jsxs)(g(),{href:"/login",children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"เข้าสู่ระบบ"]})}),(0,a.jsxs)(y.$,{variant:"ghost",onClick:()=>s(!0),children:[(0,a.jsx)(n.A,{className:"mr-2 h-4 w-4"}),"คำแนะนำ Tech Stack"]}),(0,a.jsxs)(y.$,{onClick:()=>{k("sending"),setTimeout(()=>{k("sent"),setTimeout(()=>k("idle"),3e3),alert("[จำลอง] ส่งแจ้งเตือนไปยัง LINE OA เรียบร้อยแล้ว!\n\nรายการแจ้งเตือน:\n- หมดอายุ: ".concat(R.expired," รายการ\n- ใกล้หมด: ").concat(R.warning," รายการ"))},1500)},disabled:"idle"!==b,className:"bg-[#00B900] hover:bg-[#009900] text-white",children:[(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"sending"===b?"Sending...":"sent"===b?"Sent!":"Notify LINE"]})]})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8",children:[(0,a.jsx)(f.Zp,{className:"border-primary/20 bg-gradient-to-r from-primary/10 to-primary/5",children:(0,a.jsxs)(f.aR,{children:[(0,a.jsx)(f.ZB,{className:"text-3xl",children:"ภาพรวมใบอนุญาต"}),(0,a.jsxs)(f.BT,{className:"text-base",children:["ตรวจสอบสถานะวันหมดอายุของใบอนุญาต (Registration), แยกตามบริษัท และแจ้งเตือนอัตโนมัติ ข้อมูลอัปเดตล่าสุด: ",new Date().toLocaleDateString("th-TH")]})]})}),C&&(0,a.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}),M&&(0,a.jsx)(f.Zp,{className:"border-destructive",children:(0,a.jsxs)(f.aR,{children:[(0,a.jsx)(f.ZB,{className:"text-destructive",children:"Error"}),(0,a.jsx)(f.BT,{children:M})]})}),!C&&!M&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)(f.Zp,{className:"cursor-pointer transition-all ".concat("all"===t?"ring-2 ring-primary":"hover:shadow-lg"),onClick:()=>j("all"),children:[(0,a.jsxs)(f.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(f.ZB,{className:"text-sm font-medium",children:"ใบอนุญาตทั้งหมด"}),(0,a.jsx)(r.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(f.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:R.total}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"รายการทั้งหมด"})]})]}),(0,a.jsxs)(f.Zp,{className:"cursor-pointer transition-all ".concat("expired"===t?"ring-2 ring-destructive":"hover:shadow-lg"),onClick:()=>j("expired"),children:[(0,a.jsxs)(f.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(f.ZB,{className:"text-sm font-medium",children:"หมดอายุแล้ว"}),(0,a.jsx)(o.A,{className:"h-4 w-4 text-destructive"})]}),(0,a.jsxs)(f.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-destructive",children:R.expired}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"ต้องดำเนินการด่วน"})]})]}),(0,a.jsxs)(f.Zp,{className:"cursor-pointer transition-all ".concat("warning"===t?"ring-2 ring-yellow-500":"hover:shadow-lg"),onClick:()=>j("warning"),children:[(0,a.jsxs)(f.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(f.ZB,{className:"text-sm font-medium",children:"ใกล้หมดอายุ (90 วัน)"}),(0,a.jsx)(x.A,{className:"h-4 w-4 text-yellow-500"})]}),(0,a.jsxs)(f.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:R.warning}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"ควรเตรียมต่ออายุ"})]})]}),(0,a.jsxs)(f.Zp,{className:"cursor-pointer transition-all ".concat("active"===t?"ring-2 ring-green-500":"hover:shadow-lg"),onClick:()=>j("active"),children:[(0,a.jsxs)(f.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(f.ZB,{className:"text-sm font-medium",children:"ใช้งานปกติ"}),(0,a.jsx)(m.A,{className:"h-4 w-4 text-green-500"})]}),(0,a.jsxs)(f.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:R.active}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"ยังไม่ต้องดำเนินการ"})]})]})]}),(0,a.jsx)(f.Zp,{children:(0,a.jsx)(f.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:[(0,a.jsx)("span",{className:"text-sm font-medium whitespace-nowrap",children:"Group By:"}),(0,a.jsxs)("div",{className:"inline-flex rounded-md shadow-sm",role:"group",children:[(0,a.jsx)(y.$,{type:"button",variant:"none"===w?"default":"outline",onClick:()=>v("none"),className:"rounded-r-none",children:"None"}),(0,a.jsx)(y.$,{type:"button",variant:"company"===w?"default":"outline",onClick:()=>v("company"),className:"rounded-none border-l-0",children:"Company"}),(0,a.jsx)(y.$,{type:"button",variant:"tag"===w?"default":"outline",onClick:()=>v("tag"),className:"rounded-l-none border-l-0",children:"Tag"})]})]}),(0,a.jsxs)(N.E,{variant:"secondary",className:"text-sm",children:["แสดงข้อมูล ",T.length," รายการ จากทั้งหมด ",A.length]})]})})}),(0,a.jsx)(h.I,{data:T,groupBy:w})]})]})]})}},9865:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]])}},e=>{e.O(0,[241,707,297,188,594,441,255,358],()=>e(e.s=601)),_N_E=e.O()}]);